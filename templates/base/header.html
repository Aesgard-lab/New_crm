<header class="bg-white border-b border-slate-200 px-4 md:px-6 py-3 flex items-center justify-between">
    <div>
        <div class="text-sm text-slate-500">{% block breadcrumb %}{% endblock %}</div>
        <div class="text-lg font-semibold">{% block page_title %}{% endblock %}</div>
    </div>

    <div class="flex items-center gap-6">
        <!-- Gym Selector -->
        <!-- Gym Selector -->
        {% if my_gyms %}
        <div class="relative group">
            <button
                class="flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-slate-900 transition-colors">
                <span class="text-lg">ğŸ¢</span>
                <span class="font-bold">{{ current_gym.name|default:"Selecciona Sede" }}</span>
                <svg class="w-4 h-4 text-slate-400 group-hover:rotate-180 transition-transform" fill="none"
                    stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div
                class="absolute left-0 top-full mt-2 w-56 bg-white rounded-xl shadow-xl border border-slate-100 py-2 hidden group-hover:block z-50">
                <div
                    class="px-4 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider border-b border-slate-50 mb-1">
                    Mis Sedes</div>
                {% for g in my_gyms %}
                <a href="{% url 'switch_gym' g.id %}"
                    class="flex items-center justify-between px-4 py-3 text-sm text-slate-600 hover:bg-slate-50 transition-colors {% if g.id == current_gym.id %}bg-slate-50 text-[var(--brand-color)] font-bold{% endif %}">
                    {{ g.name }}
                    {% if g.id == current_gym.id %}
                    <span class="w-2 h-2 rounded-full bg-[var(--brand-color)]"></span>
                    {% endif %}
                </a>
                {% endfor %}
            </div>
        </div>
        {% else %}
        <div class="flex items-center gap-2 text-sm text-slate-400">
            ğŸ¢ <span class="italic">Sin gimnasio asignado</span>
        </div>
        {% endif %}

        <!-- Custom Actions -->
        <a href="{% url 'pos_home' %}"
            class="hidden md:flex items-center gap-2 px-4 py-2 bg-[var(--brand-color)] text-white rounded-xl text-sm font-bold shadow-sm hover:shadow-md hover:bg-slate-800 transition-all">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
                </path>
            </svg>
            Cobrar
        </a>

        <!-- User Profile -->
        <div class="relative group pl-6 border-l border-slate-200">
            <button class="flex items-center gap-3 text-left">
                <div class="text-right hidden md:block">
                    <div class="text-sm font-bold text-slate-900 leading-tight">{{ request.user.first_name }}</div>
                    <div class="text-xs text-slate-500">{{ request.user.email }}</div>
                </div>
                <div
                    class="w-9 h-9 rounded-full bg-[var(--brand-color)] text-white flex items-center justify-center font-bold text-sm">
                    {{ request.user.first_name.0|default:"U" }}
                </div>
            </button>
            <div
                class="absolute right-0 top-full mt-2 w-48 bg-white rounded-xl shadow-lg border border-slate-100 py-1 hidden group-hover:block z-50">
                <a href="{% url 'logout' %}" class="block px-4 py-2 text-sm text-rose-600 hover:bg-rose-50 font-medium">
                    Cerrar SesiÃ³n
                </a>
            </div>
        </div>
    </div>
</header>