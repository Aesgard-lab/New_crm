{% extends "backoffice/base.html" %}
{% block page_title %}Posibles Duplicados de Clientes{% endblock %}
{% block content %}
<div class="max-w-4xl mx-auto py-8">
  <h1 class="text-2xl font-bold mb-6">Posibles Duplicados de Clientes</h1>
  {% if duplicates %}
    <div class="space-y-6">
      {% for c1, c2, score, motivo in duplicates %}
        <div class="bg-white border border-slate-200 rounded-xl p-4 flex flex-col md:flex-row md:items-center md:gap-8 shadow-sm">
          <div class="flex-1">
            <div class="font-bold text-slate-700">{{ motivo }} (score: {{ score }})</div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
              <div>
                <div class="text-xs text-slate-400">Ficha 1</div>
                <div class="font-semibold">{{ c1.first_name }} {{ c1.last_name }}</div>
                <div class="text-xs text-slate-500">Email: {{ c1.email }}<br>Tel: {{ c1.phone_number }}</div>
                <div class="text-xs text-slate-400">ID: {{ c1.id }}</div>
              </div>
              <div>
                <div class="text-xs text-slate-400">Ficha 2</div>
                <div class="font-semibold">{{ c2.first_name }} {{ c2.last_name }}</div>
                <div class="text-xs text-slate-500">Email: {{ c2.email }}<br>Tel: {{ c2.phone_number }}</div>
                <div class="text-xs text-slate-400">ID: {{ c2.id }}</div>
              </div>
            </div>
          </div>
          <div class="mt-4 md:mt-0 md:ml-8 flex flex-col gap-2">
            <a href="{% url 'client_detail' c1.id %}" class="text-xs text-indigo-600 hover:underline">Ver Ficha 1</a>
            <a href="{% url 'client_detail' c2.id %}" class="text-xs text-indigo-600 hover:underline">Ver Ficha 2</a>
            <a href="{% url 'merge_clients_wizard' c1.id c2.id %}" class="text-xs text-rose-600 font-bold hover:underline">Fusionar</a>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="bg-white border border-slate-200 rounded-xl p-6 text-center text-slate-500">No se han encontrado posibles duplicados.</div>
  {% endif %}
</div>
{% endblock %}
